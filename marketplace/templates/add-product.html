{% extends 'base.html' %}

{% block content %}

<!-- content -->
<div class="container content-container">
    <h2 class="text-dark font-weight-light border-bottom">Add/Update Product</h2>

    <!-- form -->
    <form class="mt-3" method="POST" enctype="multipart/form-data">
        {{ form.csrf_token }}
        <div class="row">
            <!-- stock input -->
            <div class="col-sm-3">
                <div class="form-group">
                    {{ form.stock.label(class_="small-font form-head") }}
                    {{ form.stock(class_="form-control small-font", placeholder="Enter monthly stock") }}
                </div>
            </div>
            <!-- category input -->
            <div class="col-sm-6">
                <div class="form-group">
                    {{ form.category.label(class_="small-font form-head") }}
                    {{ form.category(class_="form-control small-font") }}
                </div>
            </div>
            <!-- price input -->
            <div class="col-sm-3">
                <div class="form-group">
                    {{ form.price.label(class_="small-font form-head") }}
                    {{ form.price(class_="form-control small-font", placeholder="Enter price") }}
                </div>
            </div>
        </div>

        <div class="row">
            <!-- name input -->
            <div class="col">
                <div class="form-group">
                    {{ form.name.label(class_="small-font form-head") }}
                    {{ form.name(class_="form-control small-font", placeholder="Enter product name") }}
                </div>
            </div>
        </div>

        <div class="row">
            <!-- description input -->
            <div class="col">
                <div class="form-group">
                    {{ form.description.label(class_="small-font form-head") }}
                    {{ form.description(class_="form-control small-font", placeholder="Enter description") }}
                </div>
            </div>
        </div>

        <div class="row">
            <!-- primary image input -->
            <div class="col-sm-4 pl-3 pr-3">
                <div class="form-group">
                    {{ form.image_one.label(class_="small-font form-head") }}
                    {{ form.image_one(class_="form-control-file small-font") }}
                </div>
            </div>
            <!-- second image input -->
            <div class="col-sm-4 pl-3 pr-3">
                <div class="form-group">
                    {{ form.image_two.label(class_="small-font form-head") }}
                    {{ form.image_two(class_="form-control-file small-font") }}
                </div>
            </div>
            <!-- third image input -->
            <div class="col-sm-4 pl-3 pr-3">
                <div class="form-group">
                    {{ form.image_three.label(class_="small-font form-head") }}
                    {{ form.image_three(class_="form-control-file small-font") }}
                </div>
            </div>
        </div>

        <!-- display form error messages -->
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="container">
                    <div class="row mt-3 mb-3">
                        <div class="col md-12">
                            {% for message in messages %}
                            <div class="alert alert-danger">{{message}}</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endwith %}

        <!-- form submit button, launches modal -->
        <button type="button" class="btn btn-info font-weight-bold order-btn form-control mt-3" data-toggle="modal"
            data-target="#productModal">
            Add Product
        </button>

        <!-- modal -->
        <div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="productModalTitle"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="productModalLongTitle">Product Confirmation</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        Are you sure you wish to add this product?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <!-- actual submission button for form -->
                        {{ form.submit(class_="btn btn-info") }}
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}