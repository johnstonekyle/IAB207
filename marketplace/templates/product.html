{% extends 'base.html' %}

{% block content %}

<!-- content -->
<div class="container">

    <div class="row content-container mb-5">
        <!-- image carousel -->
        <div class="col-md-6">
            <div id="carouselExampleIndicators" class="carousel slide mb-3" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="../static/img/shiba.jpg" alt="First slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="../static/img/shiba2.jpg" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="../static/img/shiba3.jpg" alt="Third slide">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>

        <!-- product information -->
        <div class="col-md-6">
            <h2 class="text-dark font-weight-light border-bottom">{{ product.name }}</h2>
            <div class="text-info">
                <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i
                    class="fas fa-star"></i> <i class="fas fa-star-half-alt"></i> {{ rating }} ({{ reviewCount }} reviews)
            </div>

            <h1 class="text-dark mt-3">${{ roundedPrice }}</h1>
            <div class="small-font form-head text-muted font-weight-light">GST included</div>

            <div class="small-font form-head mt-3">CATEGORIES</div>
            <p class="small-font">{{ product.category }}</p>

            <div class="small-font form-head mt-3">DESCRIPTION</div>
            <p class="small-font">{{ product.description }}</p>

            <div class="row mt-2">
                <div class="col-2">
                    <img class="" src="../static/img/genericman.jpg" height="50px" width="50px">
                </div>
                <div class="col">
                    <span class="small-font">{{ seller.username }}<br>
                        <span class="text-info">
                            <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i class="fas fa-star"></i> <i
                                class="fas fa-star-half-alt"></i> <i class="far fa-star"></i> (1034)
                        </span>
                    </span>
                </div>
            </div>

            <a class="btn btn-info mt-4 pl-5 pr-5" href="{{ url_for('order.order', id=1) }}">
                <h3 class="font-weight-bold">Order</h3>
            </a>

        </div>
    </div>


    <!-- reviews -->
    <h2 class="text-dark font-weight-light border-bottom">Customer Reviews</h2>

    <!-- post a review form -->
    <form>
        <div class="small-font form-head" for="reviewInput">POST A REVIEW</div>

        <div class="row">
            <!-- review description input -->
            <div class="col mt-2">
                <div class="form-group m-0">
                    <textarea type="text" class="form-control small-font" id="reviewInput">Enter review</textarea>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- rating input -->
            <div class="col-sm-3 mt-2">
                <select id="ratingInput" class="form-control small-font">
                    <option selected>Select rating</option>
                    <option>1 Star</option>
                    <option>2 Star</option>
                    <option>3 Star</option>
                    <option>4 Star</option>
                    <option>5 Star</option>
                </select>
            </div>
            <!-- title input -->
            <div class="col-sm-6 mt-2">
                <input class="form-control small-font" type="text" placeholder="Enter title">
            </div>
            <!-- submission button -->
            <div class="col-sm-3 mt-2">
                <input class="btn btn-outline-info small-font form-control" type="submit" value="Post">
            </div>
        </div>
    </form>

    {% for comment in product.comments %}

    <!-- review -->
    <div class="mt-4 mb-2 border p-4">
        <div class="row">
            <div class="col review-head">
                {{ comment.title }} <span class="small-font font-weight-normal">by {{ comment.user_id }}</span>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <span class="small-font">
                    <span class="text-info">
                        {% for i in range(comment.rating|int) %}
                            <i class="fas fa-star"></i>
                        {% endfor %}
                    </span>
                </span>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col small-font">
                {{ comment.text }}
            </div>
        </div>
    </div>

    {% endfor %}
</div>

{% endblock %}